<script type="module">
  import * as THREE from "three";
  import { OrbitControls } from "three/addons/controls/OrbitControls.js";

  // サイズを指定
  const width = 960;
  const height = 540;

  // レンダラーを作成
  const canvasElement = document.querySelector("#myCanvas");
  const renderer = new THREE.WebGLRenderer({
    canvas: canvasElement,
  });
  renderer.setSize(width, height);

  // シーンを作成
  const scene = new THREE.Scene();

  // グリッドを表示
  const gridHelper = new THREE.GridHelper(750, 10);
  scene.add(gridHelper);

  // 座標軸を表示
  const axesHelper = new THREE.AxesHelper(500);
  scene.add(axesHelper);

  // カメラを作成
  const camera = new THREE.PerspectiveCamera(45, width / height, 1, 5000);
  camera.position.set(0, 0, 1500);

  // カメラコントローラーを作成
  const controls = new OrbitControls(camera, canvasElement);

  // ライトを作成
  const ambientLight = new THREE.AmbientLight(0x404040);
  scene.add(ambientLight);

  const directionalLight = new THREE.DirectionalLight(0xffffff, 2);
  directionalLight.position.set(1, 1, 1).normalize();
  scene.add(directionalLight);

  // 球体を作成し、シーンに追加
  const sphereGeometry = new THREE.SphereGeometry(50, 32, 32);
  const sphereMaterial = new THREE.MeshStandardMaterial({ color: 0x0077ff });
  const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
  scene.add(sphere);

  // アニメーションループ
  function animate() {
    sphere.position.x += (Math.random() - 0.5) * 0.1; // X軸の震え
    sphere.position.y += (Math.random() - 0.5) * 0.1; // Y軸の震え
    sphere.position.z += (Math.random() - 0.5) * 0.1; // Z軸の震え
    renderer.render(scene, camera);
    requestAnimationFrame(animate);
  }
  animate();
</script>
